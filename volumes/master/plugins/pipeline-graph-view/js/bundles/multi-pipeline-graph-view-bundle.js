(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.app-page-body--one-column{max-width:95vw}.PWGx-pipeline-connector{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background))}.PWGx-pipeline-node{position:relative;display:flex;align-items:center;justify-content:center;width:1.75rem;height:1.75rem;z-index:0}.PWGx-pipeline-node:before{content:"";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;background:var(--card-background);border-radius:50%;z-index:-1}.PWGx-pipeline-node--selected:after{box-shadow:0 0 0 .125rem currentColor,0 0 0 .5rem var(--card-background)!important}.PWGx-pipeline-node--running.PWGx-pipeline-node--selected:after{top:0;right:0;bottom:0;left:0;box-shadow:0 0 0 .125rem color-mix(in srgb,currentColor,transparent),0 0 0 .5rem var(--card-background)!important}.PWGx-pipeline-node:has(a):after{content:"";position:absolute;top:1px;right:1px;bottom:1px;left:1px;border-radius:50%;z-index:-1;transition:var(--standard-transition);box-shadow:0 0 0 .5rem transparent}.PWGx-pipeline-node:has(a):focus-visible{outline:none}.PWGx-pipeline-node:has(a):hover:after{background:oklch(from var(--color) l c h/.1)}.PWGx-pipeline-node:has(a):active:after,.PWGx-pipeline-node:has(a):focus:after{background:oklch(from var(--color) l c h/.15);box-shadow:0 0 0 .25rem oklch(from var(--color) l c h/.15)}.PWGx-pipeline-node:has(a):focus-visible:after{box-shadow:0 0 0 .2rem var(--text-color)!important}.PWGx-pipeline-node a{position:absolute;top:0;right:0;bottom:0;left:0;background:transparent}.PWGx-pipeline-node svg{width:1.75rem;height:1.75rem}.PWGx-pipeline-node:has(.PWGx-pipeline-node-terminal):before{top:4px;right:4px;bottom:4px;left:4px}.PWGx-pipeline-node-counter{width:1.25rem;border-radius:1rem;line-height:1rem;text-align:center;font-size:var(--font-size-xs);font-weight:var(--font-bold-weight);cursor:default;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));color:var(--text-color-secondary)}.PWGx-pipeline-node-counter:before{display:none!important}.PWGx-pipeline-node-terminal{width:10px;height:10px;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));border-radius:10px}.PWGx-pipeline-node-terminal:before{display:none!important}.PWGx-pipeline-connector-skipped{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background));stroke-opacity:.25}.PWGx-pipeline-small-label{font-size:.75rem;transition:translate var(--standard-transition)}.PWGx-pipeline-small-label--selected{translate:0 2px}.PWGx-pipeline-big-label{font-weight:var(--font-bold-weight);font-size:.8125rem;transition:translate var(--standard-transition);-webkit-line-clamp:1!important}.PWGx-pipeline-big-label--selected{translate:0 -2px}.PWGx-pipeline-big-label.pgv-graph-node--synthetic{font-style:italic}.PWGx-pipeline-big-label.pgv-graph-node--skeleton{color:var(--text-color-secondary);font-weight:400}.pgv-stages__group{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.pgv-stages__group .pgv-stages__heading{display:flex;font-size:var(--font-size-xs);color:var(--text-color-secondary);font-weight:var(--font-bold-weight);margin-bottom:.25rem;margin-top:0}.pgv-stages__group:first-of-type{margin-top:0}.PWGx-PipelineGraph-container{display:flex;flex-direction:column;align-items:center;overflow-x:auto;margin-bottom:0}.PWGx-PipelineGraph-container *{box-sizing:border-box}.PWGx-PipelineGraph-container .PWGx-PipelineGraph{margin-right:auto}.pgv-single-run{display:grid;grid-template-columns:220px 1fr;align-items:center}.pgv-single-run .PWGx-PipelineGraph-container{height:36px}.pgv-single-run .PWGx-PipelineGraph-container>div{margin-top:-36px}.pgv-single-run:last-of-type{border-bottom:none}.pgv-single-run .pgw-user-specified-text{display:grid;grid-template-columns:auto 1fr;align-items:start;gap:.125rem .625rem;color:var(--text-color);text-decoration:none;transition:opacity var(--standard-transition);word-break:normal;overflow-wrap:anywhere}.pgv-single-run .pgw-user-specified-text span{grid-area:2/2;color:var(--text-color-secondary);font-size:var(--font-size-xs)}.pgv-single-run .pgw-user-specified-text:hover{opacity:.75}.pgv-single-run .pgw-user-specified-text:active{opacity:.5}.pgv-single-run .pgw-user-specified-text svg{width:1.375rem;height:1.375rem}')),document.head.appendChild(e)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();
import{j as e,d as j,r as i,b as p,e as g,f,L as y,I as v,a as E,c as P}from"./assets/PipelineGraphModel-bGO3pjXz.js";import{u as N,S as R,t as S,T as C,P as _}from"./assets/PipelineGraph-l1TqC_Tt.js";function L({run:t,currentJobPath:o}){const{run:n}=N({currentRunPath:o+t.id+"/"}),l={...j,nodeSpacingH:45};function c(){if(t.changesCount===0)return;const a=i.useContext(p);return e.jsxs(e.Fragment,{children:[" - ",a.format(g.changesSummary,{0:t.changesCount})]})}return e.jsxs("div",{className:"pgv-single-run",children:[e.jsx("div",{children:e.jsxs("a",{href:o+t.id,className:"pgw-user-specified-text",children:[e.jsx(R,{status:t.result}),t.displayName,e.jsxs("span",{children:[S(t.timestamp)," - ",e.jsx(C,{ms:t.duration}),e.jsx(c,{})]})]})}),e.jsx(_,{stages:(n==null?void 0:n.stages)||[],layout:l,collapsed:!0})]})}function w(t,o,n,l=1e4){const c=t+"multi-pipeline-graph/runs";async function a(){try{const d=await(await fetch(c)).json();o(d.data)}catch(u){n(u)}finally{setTimeout(()=>a(),l)}}a()}const I=()=>{const[t,o]=i.useState([]),[n,l]=i.useState(!1),a=document.getElementById("multiple-pipeline-root").dataset.currentJobPath;i.useEffect(()=>{n||(l(!0),w(a,o,s=>{console.log(s)}))},[t,n]);const u=i.useContext(f),d=t.reduce((s,m)=>{const r=new Date(m.timestamp).toLocaleDateString(u,{year:"numeric",month:"long",day:"numeric"});return s[r]||(s[r]=[]),s[r].push(m),s},{}),x=i.useContext(p);return e.jsx(e.Fragment,{children:Object.keys(d).length===0?e.jsx("div",{className:"pgv-stages__group",children:e.jsx("div",{className:"pgv-stages__heading",children:x.format(g.noBuilds)})}):Object.entries(d).map(([s,m])=>e.jsxs("div",{className:"pgv-stages__group",children:[e.jsx("p",{className:"pgv-stages__heading",children:s}),m.map(r=>e.jsx(L,{run:r,currentJobPath:a},r.id))]},s))})},b=()=>{const t=document.getElementById("multiple-pipeline-root").dataset.userLocale;return e.jsx("div",{children:e.jsx(y,{locale:t,children:e.jsx(v,{bundles:[E.messages],children:e.jsx(I,{})})})})},h=document.getElementById("multiple-pipeline-root");if(!h)throw new Error("Failed to find the 'multiple-pipeline-root' element");const B=P.createRoot(h);B.render(e.jsx(b,{}));
//# sourceMappingURL=multi-pipeline-graph-view-bundle.js.map
